<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ø³Ø§Ø¹Ø© Ø§Ù„ØµÙ„Ø§Ø© - Ø§Ù„Ù…ØºØ±Ø¨</title>

  <!-- Ø§Ù„Ø®Ø·ÙˆØ· -->
  <link href="https://fonts.cdnfonts.com/css/digital-7" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">

  <style>
    * {
      box-sizing: border-box;
    }

    body {
      background: #0a0f1e; /* Ù„ÙˆÙ† Ø¯Ø§ÙƒÙ† Ø¹Ù…ÙŠÙ‚ */
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
      font-family: 'Cairo', sans-serif;
    }

    .board {
      width: min(95vw, 95vh);
      max-width: 550px;
      background: rgba(255, 255, 255, 0.02);
      border-radius: 30px;
      padding: 20px 15px 30px;
      box-shadow: 0 20px 30px rgba(0,0,0,0.6);
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    /* Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø³Ø§Ø¹Ø© Ø§Ù„ØªÙ†Ø§Ø¸Ø±ÙŠØ© */
    .clock-box {
      position: relative;
      width: 80%;
      max-width: 400px;
      aspect-ratio: 1/1;
      margin-top: 5px;
    }

    /* ØµÙˆØ±Ø© ÙˆØ¬Ù‡ Ø§Ù„Ø³Ø§Ø¹Ø© (ÙŠÙ…ÙƒÙ† Ø§Ø³ØªØ¨Ø¯Ø§Ù„Ù‡Ø§) */
    .clock-img {
      width: 100%;
      height: 100%;
      display: block;
      border-radius: 50%;
      background: #1e2a3a; /* Ù„ÙˆÙ† Ø®Ù„ÙÙŠØ© Ø¯Ø§ÙƒÙ† */
      box-shadow: 0 0 0 4px #2c3e50, 0 10px 20px rgba(0,0,0,0.8);
      /* Ø¥Ø°Ø§ Ø£Ø±Ø¯Øª Ø¥Ø¶Ø§ÙØ© Ø£Ø±Ù‚Ø§Ù… Ø¨Ø´ÙƒÙ„ CSS ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØªÙ‡Ø§ Ù‡Ù†Ø§ */
      object-fit: cover; /* Ù„ØªØºØ·ÙŠØ© Ø§Ù„ØµÙˆØ±Ø© Ø¥Ù† ÙˆØ¬Ø¯Øª */
    }

    /* ÙÙŠ Ø­Ø§Ù„ Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ ØµÙˆØ±Ø©ØŒ Ù†Ø±Ø³Ù… Ø¨Ø¹Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¨Ø³ÙŠØ·Ø© */
    .clock-img:after {
      content: '';
      position: absolute;
      width: 100%;
      height: 100%;
      background: transparent;
    }

    /* Ø§Ù„Ù†Ù‚Ø·Ø© Ø§Ù„Ù…Ø±ÙƒØ²ÙŠØ© */
    .center {
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      width: 4%;
      height: 4%;
      background: #ffd966;
      border-radius: 50%;
      z-index: 10;
      box-shadow: 0 0 10px #ffaa00;
    }

    /* Ø§Ù„Ø¹Ù‚Ø§Ø±Ø¨ - Ù…Ø´ØªØ±ÙƒØ© */
    .hand {
      position: absolute;
      left: 50%;       /* Ù†Ø¶Ø¹ Ù†Ù‚Ø·Ø© Ø§Ù„Ø§Ø±ØªÙƒØ§Ø² Ø¹Ù†Ø¯ 50% Ø£ÙÙ‚ÙŠØ§Ù‹ */
      bottom: 50%;      /* ÙˆØ§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø³ÙÙ„ÙŠ Ø¹Ù†Ø¯ 50% Ù„ÙŠÙƒÙˆÙ† Ø§Ù„Ø§Ø±ØªÙƒØ§Ø² ÙÙŠ Ù…Ù†ØªØµÙ Ø§Ù„Ø¹Ù‚Ø±Ø¨ ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹ */
      transform-origin: 50% 100%; /* Ù†Ù‚Ø·Ø© Ø§Ù„Ø§Ø±ØªÙƒØ§Ø² Ø£Ø³ÙÙ„ Ø§Ù„Ù…Ù†ØªØµÙ (Ù…ÙƒØ§Ù† Ø§Ù„Ù…Ø³Ù…Ø§Ø±) */
      background: linear-gradient(to top, #f1c40f, #f39c12);
      border-radius: 30px;
      box-shadow: 0 0 5px rgba(255,215,0,0.8);
      transition: background 0.2s;
      transform: rotate(0deg); /* ÙŠØªÙ… Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø¹Ø¨Ø± JS */
    }

    /* Ø£Ø·ÙˆØ§Ù„ Ø§Ù„Ø¹Ù‚Ø§Ø±Ø¨ Ù†Ø³Ø¨Ø© Ø¥Ù„Ù‰ Ø¹Ø±Ø¶ Ø§Ù„Ø­Ø§ÙˆÙŠØ© */
    #h {
      width: 6px;
      height: 25%;      /* 25% Ù…Ù† Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø­Ø§ÙˆÙŠØ© */
      background: #f1c40f;
    }
    #m {
      width: 4px;
      height: 35%;
      background: #f1c40f;
    }
    #s {
      width: 2px;
      height: 40%;
      background: #e74c3c;
      box-shadow: 0 0 10px #e74c3c;
    }

    /* Ø§Ù„Ø¹Ù†ÙˆØ§Ù† */
    .title {
      margin-top: 25px;
      font-size: 22px;
      font-weight: 700;
      color: #ecf0f1;
      text-shadow: 0 2px 5px #2c3e50;
      letter-spacing: 1px;
    }

    /* Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø¹Ø¯Ø§Ø¯ */
    .countbox {
      margin-top: 8px;
      background: #00000040;
      backdrop-filter: blur(4px);
      padding: 12px 25px;
      border-radius: 60px;
      border: 1px solid #f1c40f40;
      box-shadow: 0 5px 15px rgba(0,0,0,0.5);
    }

    .countbox .time {
      font-family: 'Digital-7 Mono', 'Courier New', monospace;
      font-size: 48px;
      font-weight: bold;
      color: #f1c40f;
      text-shadow: 0 0 10px #f1c40f;
      letter-spacing: 5px;
      line-height: 1.2;
    }

    /* Ø±Ø³Ø§Ù„Ø© Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø¹Ø¯ */
    .finished-message {
      color: #2ecc71;
      font-size: 28px;
      font-weight: bold;
      text-shadow: 0 0 15px #2ecc71;
      display: none;
    }

    /* Ø­Ù‚Ù„ Ø§Ø®ØªÙŠØ§Ø± ÙˆÙ‚Øª Ø§Ù„Ù…ØºØ±Ø¨ */
    .time-picker {
      margin-top: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
      background: #1e2a3a;
      padding: 10px 18px;
      border-radius: 50px;
      border: 1px solid #3a4a5a;
    }

    .time-picker label {
      color: #b0c4de;
      font-size: 16px;
    }

    .time-picker input[type="time"] {
      background: #0f1a24;
      border: 1px solid #f1c40f;
      color: #f1c40f;
      font-family: 'Digital-7 Mono', monospace;
      font-size: 20px;
      padding: 5px 10px;
      border-radius: 30px;
      outline: none;
      direction: ltr; /* Ù„ÙƒÙŠ ÙŠØ¸Ù‡Ø± Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­ */
    }

    .time-picker input[type="time"]::-webkit-calendar-picker-indicator {
      filter: invert(1);
      opacity: 0.7;
      cursor: pointer;
    }

    /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„ØµØºÙŠØ±Ø© */
    @media (max-width: 480px) {
      .title { font-size: 18px; }
      .countbox .time { font-size: 36px; }
      .hand { border-radius: 10px; }
      #h { width: 4px; }
      #m { width: 3px; }
      #s { width: 2px; }
    }
  </style>
</head>
<body>

<div class="board">

  <!-- Ø§Ù„Ø³Ø§Ø¹Ø© Ø§Ù„ØªÙ†Ø§Ø¸Ø±ÙŠØ© -->
  <div class="clock-box">
    <!-- ØµÙˆØ±Ø© ÙˆØ¬Ù‡ Ø§Ù„Ø³Ø§Ø¹Ø© (ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªØ¨Ø¯Ø§Ù„Ù‡Ø§ Ø¨ØµÙˆØ±ØªÙƒ Ø§Ù„Ø®Ø§ØµØ©) -->
    <img src="background.jpg.png" alt="ÙˆØ¬Ù‡ Ø§Ù„Ø³Ø§Ø¹Ø©" class="clock-img" onerror="this.style.background='#1e2a3a'; this.src=''; this.alt='';">

    <!-- Ù†Ù‚Ø·Ø© Ø§Ù„Ù…Ø±ÙƒØ² Ø§Ù„ØªÙŠ ØªØ«Ø¨Øª Ø¹Ù„ÙŠÙ‡Ø§ Ø§Ù„Ø¹Ù‚Ø§Ø±Ø¨ -->
    <div class="center">
      <!-- Ø§Ù„Ø¹Ù‚Ø§Ø±Ø¨ Ø³ØªÙˆØ¶Ø¹ Ù‡Ù†Ø§ (Ù†Ø³Ø¨ÙŠØ§Ù‹) -->
      <div id="h" class="hand"></div>
      <div id="m" class="hand"></div>
      <div id="s" class="hand"></div>
    </div>
  </div>

  <!-- Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ÙˆØ§Ù„Ø¹Ø¯Ø§Ø¯ -->
  <div class="title">ğŸ•‹ Ø¢Ø°Ø§Ù† Ø§Ù„Ù…ØºØ±Ø¨ Ø¨Ø¹Ø¯:</div>

  <div class="countbox">
    <div class="time" id="count">00:00:00</div>
    <div class="finished-message" id="finishedMsg">ğŸ”” Ø­Ø§Ù† ÙˆÙ‚Øª Ø§Ù„Ù…ØºØ±Ø¨</div>
  </div>

  <!-- Ø§Ø®ØªÙŠØ§Ø± ÙˆÙ‚Øª Ø§Ù„Ù…ØºØ±Ø¨ (ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØªÙ‡ Ø£Ùˆ Ø¥Ø®ÙØ§Ø¤Ù‡) -->
  <div class="time-picker">
    <label for="maghribTime">ÙˆÙ‚Øª Ø§Ù„Ù…ØºØ±Ø¨:</label>
    <input type="time" id="maghribTime" value="18:45">
  </div>

</div>

<script>
  (function() {
    // --- Ø¹Ù†Ø§ØµØ± Ø«Ø§Ø¨ØªØ© ---
    const hourHand = document.getElementById('h');
    const minuteHand = document.getElementById('m');
    const secondHand = document.getElementById('s');
    const countElement = document.getElementById('count');
    const finishedMsg = document.getElementById('finishedMsg');
    const maghribInput = document.getElementById('maghribTime');

    // --- Ù…ØªØºÙŠØ±Ø§Øª Ù„ØªØ®Ø²ÙŠÙ† ÙˆÙ‚Øª Ø§Ù„Ù…ØºØ±Ø¨ (ÙŠØªÙ… ØªØ­Ø¯ÙŠØ«Ù‡Ø§ Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± input) ---
    let targetHour = 18;
    let targetMinute = 45;
    let targetSecond = 0;   // Ø«Ø§Ø¨Øª

    // Ø¯Ø§Ù„Ø© ØªØ­Ø¯ÙŠØ« ÙˆÙ‚Øª Ø§Ù„Ù…ØºØ±Ø¨ Ù…Ù† Ø­Ù‚Ù„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„
    function updateTargetTimeFromInput() {
      const timeStr = maghribInput.value; // format "HH:MM"
      if (timeStr) {
        const parts = timeStr.split(':');
        targetHour = parseInt(parts[0], 10);
        targetMinute = parseInt(parts[1], 10);
      }
    }

    // Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø§Ù„ÙˆÙ‚Øª
    maghribInput.addEventListener('change', function() {
      updateTargetTimeFromInput();
    });

    // ØªØ­Ø¯ÙŠØ« Ø£ÙˆÙ„ÙŠ
    updateTargetTimeFromInput();

    // --- Ø¯Ø§Ù„Ø© Ø­Ø³Ø§Ø¨ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ Ù„Ù„Ù…ØºØ±Ø¨ ---
    function getTimeRemaining() {
      const now = new Date();

      // Ø¥Ù†Ø´Ø§Ø¡ target time Ù„Ù„ÙŠÙˆÙ… Ø§Ù„Ø­Ø§Ù„ÙŠ
      let target = new Date();
      target.setHours(targetHour, targetMinute, targetSecond, 0);

      // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ø§Ù„ÙŠ Ø¨Ø¹Ø¯ targetØŒ Ù†Ø¶ÙŠÙ ÙŠÙˆÙ…Ø§Ù‹
      if (now > target) {
        target.setDate(target.getDate() + 1);
      }

      return target - now;
    }

    // --- Ø¯Ø§Ù„Ø© ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø¯ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ (ØªØ³ØªØ¯Ø¹Ù‰ ÙƒÙ„ Ø«Ø§Ù†ÙŠØ©) ---
    function updateCountdown() {
      const diff = getTimeRemaining();

      if (diff <= 0) {
        // Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„ÙˆÙ‚Øª: Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© ÙˆØ¥Ø®ÙØ§Ø¡ Ø§Ù„Ø£Ø±Ù‚Ø§Ù…
        countElement.style.display = 'none';
        finishedMsg.style.display = 'block';
        // Ù†Ø¹ÙŠØ¯ ØªØ¹ÙŠÙŠÙ† target Ù„Ù„ÙŠÙˆÙ… Ø§Ù„ØªØ§Ù„ÙŠ Ø¨Ø¹Ø¯ ÙØªØ±Ø© ÙˆØ¬ÙŠØ²Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
        // Ù„ÙƒÙ†Ù†Ø§ Ø³Ù†ØªØ±ÙƒÙ‡ ÙŠØ¸Ù‡Ø± Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù„Ù…Ø¯Ø© Ø¯Ù‚ÙŠÙ‚Ø© Ù…Ø«Ù„Ø§Ù‹ Ø«Ù… ÙŠØ¹ÙˆØ¯ Ù„Ù„Ø¹Ø¯ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ Ø§Ù„ØªØ§Ù„ÙŠ
        // ÙŠÙ…ÙƒÙ† Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· target ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯Ù…Ø§ ÙŠØµØ¨Ø­ Ø§Ù„ÙØ±Ù‚ > 0
        // Ù‡Ù†Ø§ Ø³Ù†Ø¹ÙŠØ¯ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø¨Ø¹Ø¯ 5 Ø«ÙˆØ§Ù†Ù (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
        setTimeout(() => {
          countElement.style.display = 'block';
          finishedMsg.style.display = 'none';
        }, 5000);
        return;
      }

      // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª
      countElement.style.display = 'block';
      finishedMsg.style.display = 'none';

      const hours = Math.floor(diff / 3600000);
      const minutes = Math.floor((diff % 3600000) / 60000);
      const seconds = Math.floor((diff % 60000) / 1000);

      countElement.innerHTML = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
    }

    // --- Ø¯Ø§Ù„Ø© ØªØ­Ø¯ÙŠØ« Ø¹Ù‚Ø§Ø±Ø¨ Ø§Ù„Ø³Ø§Ø¹Ø© (Ø­Ø±ÙƒØ© Ø³Ù„Ø³Ø©) ---
    function updateClockHands() {
      const now = new Date();
      const hours = now.getHours();
      const minutes = now.getMinutes();
      const seconds = now.getSeconds();
      const ms = now.getMilliseconds();

      // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø²ÙˆØ§ÙŠØ§ Ù…Ø¹ Ø¥Ø¶Ø§ÙØ© 90 Ø¯Ø±Ø¬Ø© Ù„Ø¬Ø¹Ù„ Ø§Ù„Ø¹Ù‚Ø±Ø¨ ÙŠØ´ÙŠØ± Ù„Ù„Ø£Ø¹Ù„Ù‰ Ø¹Ù†Ø¯ 12
      const hourDeg = ((hours % 12) * 30) + (minutes * 0.5) + 90;
      const minuteDeg = (minutes * 6) + (seconds * 0.1) + 90;
      const secondDeg = (seconds * 6) + (ms * 0.006) + 90;

      hourHand.style.transform = `rotate(${hourDeg}deg)`;
      minuteHand.style.transform = `rotate(${minuteDeg}deg)`;
      secondHand.style.transform = `rotate(${secondDeg}deg)`;

      // Ø§Ø³ØªÙ…Ø±Ø§Ø± Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø³Ù„Ø³
      requestAnimationFrame(updateClockHands);
    }

    // --- Ø¯ÙˆØ±Ø© Ø­ÙŠØ§Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª ---
    // 1. ØªØ´ØºÙŠÙ„ Ø­Ø±ÙƒØ© Ø§Ù„Ø¹Ù‚Ø§Ø±Ø¨ (Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… requestAnimationFrame)
    requestAnimationFrame(updateClockHands);

    // 2. ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø¯ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ ÙƒÙ„ Ø«Ø§Ù†ÙŠØ© (Ù…Ø¹ ØªØµØ­ÙŠØ­ millisecond)
    function startCountdownInterval() {
      updateCountdown(); // ÙÙˆØ±ÙŠ
      const interval = setInterval(updateCountdown, 1000);
      return interval;
    }
    startCountdownInterval();

    // 3. Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø¯ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ ÙÙˆØ± ØªØºÙŠÙŠØ± ÙˆÙ‚Øª Ø§Ù„Ù…ØºØ±Ø¨
    maghribInput.addEventListener('input', function() {
      updateTargetTimeFromInput();
      updateCountdown(); // ØªØ­Ø¯ÙŠØ« ÙÙˆØ±ÙŠ Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø§Ù„ÙˆÙ‚Øª
    });

  })();
</script>
</body>
</html>